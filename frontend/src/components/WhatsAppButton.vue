<template>
  <a :href="whatsappLink" 
     target="_blank" 
     rel="noopener noreferrer"
     class="fixed bottom-6 right-6 z-50 
            flex items-center justify-center 
            bg-gradient-to-br from-[#6EC568] to-[#26A81D] 
            hover:from-[#5aa855] hover:to-[#23991a] 
            text-white 
            p-3
            rounded-full 
            shadow-2xl
            transition-all duration-300 ease-in-out 
            transform hover:scale-110 
            w-19 h-19
            whatsapp-pulse" aria-label="Hubungi kami via WhatsApp"
  >
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="21" viewBox="0 0 20 21" fill="none" class="w-10 h-10">
        <path d="M14.6548 11.8156L12.1548 10.5656C12.0563 10.5166 11.9467 10.4944 11.837 10.5012C11.7273 10.5081 11.6213 10.5438 11.5298 10.6047L10.3821 11.3703C9.85526 11.0807 9.42171 10.6471 9.13209 10.1203L9.89772 8.97266C9.95863 8.88112 9.99432 8.77514 10.0012 8.6654C10.008 8.55567 9.98582 8.44606 9.93678 8.34766L8.68678 5.84766C8.63497 5.74302 8.55489 5.655 8.45561 5.59355C8.35633 5.5321 8.24182 5.4997 8.12506 5.5C7.29626 5.5 6.50141 5.82924 5.91536 6.41529C5.3293 7.00134 5.00006 7.7962 5.00006 8.625C5.00213 10.4477 5.72712 12.1952 7.01599 13.4841C8.30485 14.7729 10.0523 15.4979 11.8751 15.5C12.2854 15.5 12.6918 15.4192 13.0709 15.2621C13.4501 15.1051 13.7946 14.8749 14.0848 14.5847C14.375 14.2945 14.6051 13.95 14.7622 13.5709C14.9192 13.1917 15.0001 12.7854 15.0001 12.375C15.0001 12.2589 14.9679 12.145 14.9069 12.0462C14.8459 11.9474 14.7586 11.8676 14.6548 11.8156ZM11.8751 14.25C10.3837 14.2483 8.95395 13.6552 7.89942 12.6006C6.84488 11.5461 6.25172 10.1163 6.25006 8.625C6.24994 8.1915 6.40004 7.77135 6.6748 7.43605C6.94956 7.10075 7.33202 6.87101 7.75709 6.78594L8.65397 8.58281L7.89069 9.71875C7.83365 9.80431 7.7986 9.90262 7.78866 10.005C7.77871 10.1073 7.79417 10.2105 7.83366 10.3055C8.28083 11.3683 9.12633 12.2138 10.1891 12.6609C10.2844 12.7022 10.3884 12.7191 10.4917 12.7101C10.5951 12.7011 10.6946 12.6665 10.7813 12.6094L11.9227 11.8484L13.7196 12.7453C13.6339 13.1709 13.4031 13.5535 13.0667 13.8279C12.7304 14.1023 12.3092 14.2515 11.8751 14.25ZM10.0001 2.375C8.5973 2.37469 7.21836 2.73757 5.99745 3.4283C4.77654 4.11904 3.75526 5.1141 3.03301 6.31664C2.31077 7.51918 1.91216 8.88822 1.87599 10.2905C1.83983 11.6928 2.16733 13.0806 2.82663 14.3188L1.93991 16.9789C1.86646 17.1992 1.8558 17.4355 1.90913 17.6615C1.96245 17.8874 2.07765 18.0941 2.24182 18.2582C2.40599 18.4224 2.61264 18.5376 2.8386 18.5909C3.06456 18.6443 3.30091 18.6336 3.52116 18.5602L6.18131 17.6734C7.27098 18.253 8.47836 18.5767 9.7118 18.62C10.9453 18.6633 12.1724 18.425 13.3 17.9232C14.4276 17.4215 15.426 16.6694 16.2196 15.7241C17.0132 14.7789 17.5809 13.6652 17.8798 12.4678C18.1788 11.2703 18.2009 10.0205 17.9447 8.81315C17.6885 7.60584 17.1605 6.47276 16.401 5.49993C15.6415 4.52711 14.6703 3.74009 13.5612 3.19864C12.4521 2.65718 11.2343 2.37551 10.0001 2.375ZM10.0001 17.375C8.79145 17.3758 7.60405 17.0575 6.55788 16.4523C6.48128 16.4079 6.39612 16.3803 6.30803 16.3713C6.21995 16.3622 6.13095 16.372 6.04694 16.4L3.12506 17.375L4.09928 14.4531C4.12737 14.3692 4.13729 14.2802 4.1284 14.1921C4.11951 14.104 4.09201 14.0188 4.04772 13.9422C3.28989 12.632 2.98562 11.1083 3.18212 9.60747C3.37862 8.10667 4.0649 6.71267 5.13451 5.64171C6.20411 4.57076 7.59725 3.88271 9.09779 3.68431C10.5983 3.48592 12.1224 3.78826 13.4336 4.54444C14.7448 5.30062 15.7698 6.46837 16.3496 7.86652C16.9293 9.26468 17.0315 10.8151 16.6402 12.2773C16.249 13.7394 15.3861 15.0316 14.1855 15.9533C12.9849 16.875 11.5137 17.3748 10.0001 17.375Z" fill="#FAFAFA"/>
    </svg>
  </a>
</template>

<script>
export default {
  name: 'WhatsAppButton',
  props: {
    phoneNumber: {
      type: String,
      required: true,
      default: '6281234567890' 
    },
    initialMessage: {
      type: String,
      default: 'Halo, saya ingin bertanya.'
    }
  },
  computed: {
    whatsappLink() {
      const cleanNumber = this.phoneNumber.replace(/\D/g, ''); 
      const encodedMessage = encodeURIComponent(this.initialMessage);
      
      let link = `https://wa.me/${cleanNumber}`;
      
      if (encodedMessage) {
        link += `?text=${encodedMessage}`;
      }
      
      return link;
    }
  }
}
</script>

<style scoped>
@keyframes whatsapp-pulse {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* Shadow default */
  }
  50% {
    transform: scale(1.05); 
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2), 0 10px 10px -5px rgba(0, 0, 0, 0.04); /* Shadow membesar */
  }
}

.whatsapp-pulse {
  animation: whatsapp-pulse 2s infinite ease-in-out; 
}

.whatsapp-pulse:hover {
  animation: none;
}
</style>